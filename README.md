# Транспорт Самары
Автор: Шашов Кирилл

Приложение является клиентом для сервиса http://tosamara.ru/. 
Информация о предоставленном API: http://tosamara.ru/api/

##Описание
###Минимальный функционал
Приложение должно иметь 4 экрана:
* Экран с загрузкой обновлений вспомогательных справочный файлов (например, с остановками)
* Список остановок (ближайшие к пользователю)
* Настройки (например, дистанция поиска остановок)
* Список прибывающего транспорта для конкретной остановки. 

Требования:
* По возможности соответствовать современным требованиям по дизайну.
* Корректно обрабатывать смену конфигурации (например, ориентация экрана)
* Использовать базу данных с ORM фреймворком

###Пожелания:
* Просмотр маршрута по номеру
* Полнотекстовый поиск остановок по названию

##Новости
###27.11.2016
Загружено 2 проекта:
* [dao-gen](dao-gen/) Проект для генерации классов для функционирования GreenDao
* [app](app/) Основное приложение

Добавлены 2 активити:
* `com.transportsmr.app.SplashScreenActivity` Отвечает за экран загрузки. При доступе в интернет проверяется наличие обновлений файлов (пока только справочник остановок). Если файл устарел, он скачивается, парсится, информация заносится в базу данных. Работа с сетью и обновление БД выполняются в `com.transportsmr.app.async.ClassifiersUpdateTask`. В качестве прослойки между таской и активити используется фрагмент с установленным свойством `setRetainInstance(true)` для независимости от жизненного цикла активити. Взаимодействие между активити, фрагметом, таской осуществляется посредством метода обратного вызова (callback) для минимизации связи между компонентами. В данный момент есть известная проблема: в случае, если приложению не получилось обновиться (например, сетевая ошибка при скачивании), пользователю не предлагается повторить процедуру (приходится перезапускать приложение).  
* `com.transportsmr.app.MainActivity` В качестве тулбара используется `android.support.v7.widget.Toolbar`, стандартный тулбар скрыт стилями кастомной темы. Активити использует Navigation Drawer для отображения меню. 




